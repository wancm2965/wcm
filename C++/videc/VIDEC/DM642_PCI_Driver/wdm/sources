# sources file for use with DDK BUILD utility
#
# Generated by DriverWizard 3.2.0 (Build 2485)
# File created on 9/29/2007
#
TARGETNAME = AVCON642
TARGETPATH = obj
TARGETTYPE = DRIVER
DRIVERTYPE = WDM
#386_WARNING_LEVEL = /W3
#COMPILER_WX_SWITCH =

#uncomment the following line to build with C++ compiler
#USECXX_FLAG=/Tp

!IF ("$(DDKBUILDENV)"=="chk") || ("$(DDKBUILDENV)"=="checked")
BUILDTYPE = CHECKED
!ELSE
BUILDTYPE = FREE
NTDEBUG=
!ENDIF


# Singly linked lists have been optimized in a non-back
# compatible way for XP and later platforms.  As such,
# any binary built with the XP or later DDK and using
# singly linked lists will not load on 2000 and earlier
# platforms without the use of the following define in
# the build.  This define turns off the new optimizations,
# and thus it should only be used for cross-platform
# binaries.
#C_DEFINES =$(C_DEFINES) -D_WIN2K_COMPAT_SLIST_USAGE


!if !defined(DDK_TARGET_OS) || "$(DDK_TARGET_OS)"=="Win2K"
C_DEFINES =$(C_DEFINES) -DWIN2K
!endif


TARGETLIBS=$(DDK_LIB_PATH)\ntoskrnl.lib \
           $(DDK_LIB_PATH)\csq.lib \
           $(DRIVERWORKS)\lib\*\$(BUILDTYPE)\vdw_wdm.lib
           #$(DDK_LIB_PATH)\ntstrsafe.lib

C_DEFINES =$(C_DEFINES) -DNTVERSION='WDM' -D_DW_INCLUDE_NTDDK_

LINK_LIB_IGNORE=4099,4210

INCLUDES=$(DRIVERWORKS)\..\common\include\stl;\
         $(DRIVERWORKS)\include;\
		 $(DRIVERWORKS)\source;\
  		 $(DDK_INC_PATH);\
		 #$(DRIVERWORKS)\include\dep_vxd;\


SOURCES=DM64.rc \
        DM64Driver.cpp \
        DM64Device.cpp \
        DM64Queue.cpp \

#DM64_WMI_TRACE=1

!ifdef DM64_WMI_TRACE

C_DEFINES =$(C_DEFINES) -DDM64_WMI_TRACE

!if ("$(PRECOMPILED_CXX)" == "") && ("$(USECXX_FLAG)" == "")
RUN_WPP=$(SOURCES)\
        -km \
        -func:DM64DebugPrint(AREA,LEVEL,MSG,...)
!else
RUN_WPP=$(SOURCES)\
        -km -dll\
        -func:DM64DebugPrint(AREA,LEVEL,MSG,...)
!endif

!endif

