/*
 *  Copyright 2003 by Texas Instruments Incorporated.
 *  All rights reserved. Property of Texas Instruments Incorporated.
 *  Restricted rights to use, duplicate or disclose this code are
 *  granted through contract.
 *  
 */
/* "@(#) DDK 1.10.00.23 07-02-03 (ddk-b12)" */
/********************************************************************/
/* _ad9880.c file                                                      */
/********************************************************************/
#include "ad9880.h"
#include "_ad9880.h"

Uint8 _AD9880_Configure[] = {
	0x00,				// 0x00: default
	
	PLL_MSB(1688),		// 0x1:PLL DIV MSB
	PLL_LSB(1688),		// 0x2:PLL DIV LSB
	0xA0,				// 0X3:Clock Generator Control, VGO: 60-120,
	                 	// Charge Pump Current:350, Internally generated clock,
	                 	
	0x00,				// 0x04: default value
	0x00,				// 0x05: default value
	0x00,				// 0x06: default value
	0x00,				// 0x07: default value
	
	0x00,				// 0x08: Red Offset Adjust     输入补偿
	0x04,				// 0x09: Red Offset
	0x00,				// 0x0A: Green Offset Adjust
	0x04,				// 0x0B: Green Offset
	0x00,				// 0x0C: Blue Offset Adjust
	0x04,				// 0x0D: Blue Offset
	
	0x00,              	// 0xe : default value
	0x00,
	0x00,				// 0x10: default value 
	
	0x55,				// 0x11:  sync source、channel select、interface select 
	          			//     水平、垂直同步源，通道及接口选择

	0x00,				// 0x12: default value
	0x00,				// 0x13: default value
	0x00,				// 0x14: default value
	0x00,				// 0x15: default value	          
	0x00,				// 0x16: default value
	0x00,				// 0x17: default value
	0x00,				// 0x18: default value
	0x00,				// 0x19: default value
	
	0x14,				// 0x1A: Clamp Duration 箝位
	0x02,				// 0x1B: 
	0xCE, //0x4E,				// 0x1C:
	0xFF,				// 0x1D: Slew Limit
	
	0x00,				// 0x1e: default value
	0x00,				// 0x1f: default value
	0x00,				// 0x20: default value

	// Polarity status
	0xEC,				// 0x21, 11101100 Sync Processing Filter Enable、PLL Sync filter Enable、Vsync Filter Enable
	            		//       Auto Offset Clamp Mode, Auto Offset Clamp Length
	0x04,				// 0x22, Vsync Duration 
	0x20,				// 0x23, Hsync Duration
	0xEA,				// 0x24, 11111010
	0x66,				// 0x25, 01100110
	0x38,				// 0x26, 00111000
	
	0x00,				// 0x27: default value
	0x00,				// 0x28: default value
	0x00,				// 0x29: default value
	0x00,				// 0x2a: default value	          
	0x00,				// 0x2b: default value
	0x00,				// 0x2c: default value
	0x00,				// 0x2d: default value
	0x00,				// 0x2e: default value
	0x00,				// 0x2f: default value
	0x00,				// 0x30: default value
	0x00,				// 0x31: default value
	0x00,				// 0x32: default value	          
	0x00,				// 0x33: default value
	
	// Macrovision 
	0x84,       // 0x34, 10000110 Enables the FIR filter for 4:2:2 CrCb output, enable CSC
	
	0x3b,				// 0x4D
	0x6d, 				// 0x4E,
	0x54, 				// 0x4F,
	0x90, 				// 0x50,

	0x3f, 				// 0x53,
	0x0f,				// 0x56, test
	0x20 				// 0x59,
};

Uint8 _AD9880_CSC[][24] = {
	/* HDTV YCrCb (0-255) to RGB (0-255) */
	{0x0C, 0x52, 0x08, 0x00, 0x00, 0x00, 0x19, 0xD7, 0x1C, 0x54, 0x08, 0x00,
	 0x3E, 0x89, 0x02, 0x91, 0x00, 0x00, 0x08, 0x00, 0x0E, 0x87, 0x18, 0xBD},
	/* HDTV YCrCb (16-255) to RGB (0-255) */
	{0x47, 0x2c, 0x04, 0xA8, 0x00, 0x00, 0x1C, 0x1F, 0x1D, 0xDD, 0x04, 0xA8,
	 0x1F, 0x26, 0x01, 0x34, 0x00, 0x00, 0x04, 0xA8, 0x08, 0x75, 0x1B, 0x7D},
	/* SDTV YCrCb (0-255) to RGB (0-255) */
	{0x2A, 0xFA, 0x08, 0x00, 0x00, 0x00, 0x1A, 0x84, 0x1A, 0x6A, 0x08, 0x00,
	 0x1D, 0x50, 0x04, 0x23, 0x00, 0x00, 0x08, 0x00, 0x0D, 0xDB, 0x19, 0x12},
	 /* SDTV YCrCb (16-235) to RGB (0-255) */
	{0x46, 0x63, 0x04, 0xA8, 0x00, 0x00, 0x1C, 0x84, 0x1C, 0xC0, 0x04, 0xA8, 
	 0x1E, 0x6F, 0x02, 0x1E, 0x00, 0x00, 0x04, 0xA8, 0x08, 0x11, 0x1B, 0xAD},
	 /* RGB (0-255) to HDTV YCrCb (0-255) */
	{0x08, 0x2D, 0x18, 0x93, 0x1F, 0x3F, 0x08, 0x00, 0x03, 0x68, 0x0B, 0x71,
	 0x01, 0x27, 0x00, 0x00, 0x1E, 0x21, 0x19, 0xB2, 0x08, 0x2D, 0x08, 0x00},
	 /* RGB (0-255) to HDTV YCrCb (16-235) */
	{0x07, 0x06, 0x19, 0xA0, 0x1F, 0x5B, 0x08, 0x00, 0x02, 0xED, 0x09, 0xD3,
	 0x00, 0xFD, 0x01, 0x00, 0x1E, 0x64, 0x1A, 0x96, 0x07, 0x06, 0x08, 0x00},
	 /* RGB (0-255) to HDTV YCrCb (0-255) */
	{0x08, 0x2D, 0x19, 0x27, 0x1E, 0xAC, 0x08, 0x00, 0x04, 0xC9, 0x09, 0x64,
	 0x01, 0xD3, 0x00, 0x00, 0x1D, 0x3F, 0x1A, 0x93, 0x08, 0x2D, 0x08, 0x00},
	 /* RGB (0-255) to HDTV YCrCb (16-235) */
	{0x07, 0x06, 0x1A, 0x1E, 0x1E, 0xDC, 0x08, 0x00, 0x04, 0x1C, 0x08, 0x11,
	 0x01, 0x91, 0x01, 0x00, 0x1D, 0xA3, 0x1B, 0x57, 0x07, 0x06, 0x08, 0x00} 
};

AD9880_tblMode DVI_tblMode[] = {
{ 520,  530, 60, {  720,  480,  62, 14, 0 /*P*/}, { 0x28, 0x08,  816} },

{ 560,  565, 50, { 1920, 1080, 150,  5, 1 /*I*/}, { 0xA0, 0x3C, 1956} },  // 1080i@50
{ 558,  568, 60, { 1920, 1080, 150,  7, 1 /*I*/}, { 0xA0, 0x3C, 1956} },

{ 624,  627, 50, {  720,  480,  62, 14, 0 /*P*/}, { 0x28, 0x08,  816} },

{1124, 1126, 25, { 1920, 1080, 150,  9, 0 /*P*/}, { 0xA0, 0x3C, 1956} },
{1124, 1126, 30, { 1920, 1080, 150,  9, 0 /*P*/}, { 0xA0, 0x3C, 1956} },
{1124, 1126, 50, { 1920, 1080, 150,  5, 0 /*P*/}, { 0xA0, 0x3C, 1956} },
{1124, 1126, 60, { 1920, 1080, 150,  5, 0 /*P*/}, { 0xA0, 0x3C, 1956} },
//{ 1230, 1232, { 1920, 1080, 150,  5, 0 /*P*/}, { 0xA0, 0x3C, 1956} },

{ 627,  629, 60, {  800,  600,  88,  4, 0 /*P*/}, { 0x68, 0x08, 1058} },
{ 660,  670, 70, {  800,  600,  64, 42, 0 /*P*/}, { 0x70, 0x08, 1040} },
{ 623,  624, 72, {  800,  600, 160,  2, 0 /*P*/}, { 0x70, 0x08, 1056} },
{ 625,  627, 75, {  800,  600, 160,  3, 0 /*P*/}, { 0x70, 0x08, 1046} },

{ 803,  808, 60, { 1024,  768, 160,  8, 0 /*P*/}, { 0xA0, 0x08, 1344} }, /* 60Hz */
//{ 803,  808, { 1024,  768, 144,  8, 0 /*P*/}, { 0xA0, 0x08, 1344} }, /* 70Hz or 72Hz */
{ 799,  799, 60, { 1024,  768, 176,  2, 0 /*P*/}, { 0xA0, 0x08, 1312} },
{ 800,  801, 70, { 1024,  768, 176,  2, 0 /*P*/}, { 0xA0, 0x08, 1312} },
{ 893,  894, 60, { 1152,  864, 184,  3, 0 /*P*/}, { 0xA0, 0x08, 1520} },
{ 895,  896, 60, { 1152,  864, 184,  2, 0 /*P*/}, { 0xA0, 0x08, 1520} },

{ 748,  752, 30, { 1280,  720, 200,  8, 0 /*P*/}, { 0x28, 0x08, 6000} }, // 720p@30Hz
{ 746,  752, 50, { 1280,  720, 220,  8, 0 /*P*/}, { 0xA0, 0x08, 1664} }, // 50hz
{ 744,  745, 60, { 1280,  720, 192,  2, 0 /*P*/}, { 0xA0, 0x08, 1664} },
{ 746,  752, 60, { 1280,  720, 216,  12, 0 /*P*/}, { 0xA0, 0x08, 1664} }, // 60hz

{ 998,  999, 60, { 1280,  960, 312,  2, 0 /*P*/}, { 0xA0, 0x08, 1798} },
{1000, 1002, 70, { 1280,  960, 312,  3, 0 /*P*/}, { 0xA0, 0x08, 1798} },
{1062, 1065, 60, { 1280, 1024, 248,  2, 0 /*P*/}, { 0xA0, 0x08, 1699} },
{1066, 1068, 60, { 1280, 1024, 248,  3, 0 /*P*/}, { 0xA0, 0x08, 1688} },
{ 797,  798, 60, { 1360,  768, 210,  7, 0 /*P*/}, { 0xA0, 0x08, 1798} },

{ 1248, 1250, 60, { 1600,  1200, 210,  7, 0 /*P*/}, { 0xA0, 0x08, 1798} },

{1088, 1090, 60, { 1680, 1050, 280,  7, 0 /*P*/}, { 0xA0, 0x08, 1700} }, /* 20090223 update */

// any resolution match
{ 1,  1, 60, {  640,  350,  62, 14, 0 /*P*/}, { 0x28, 0x08,  816} },
{0, 0}
};

AD9880_tblMode VGA_tblMode[] = {
{512, 522, 60,{	848, 480, 192, 13, 0 /*P*/},{ 0x68, 0x08, 1088} },  // 60Hz
{557, 567, 50,{	1920, 1080,	192, 7, 1/*I*/},{ 0xA0, 0x08, 2640} },
{557, 567, 60,{	1920, 1080,	168,7, 1/*I*/},{ 0xA0, 0x3C, 2200} },
{620, 630, 50,{	1920, 1080, 326, 7, 1/*I*/},{0xA0, 0x08, 2304} },
{620, 630, 75,{	800, 600, 208, 3, 0/*P*/},{ 0x70, 0x08, 1056} },
{623, 633, 60,{	800, 600, 184, 4, 0/*P*/},{ 0x68, 0x08, 1056} },
{661, 671, 72,{	800, 600, 152, 42, 0/*P*/},{ 0x70, 0x08, 1040} },

{745, 755,	60,{ 1280, 720, 228, 9, 0/*P*/},{ 0xA0, 0x08, 1650} },
{745, 755,	50,{ 1280, 720, 260, 9, 0/*P*/},{ 0xA0,	0x08, 1980} },
{797, 802,	60,{ 1280, 768, 288, 9, 0/*P*/},{ 0xa0, 0x08, 1664} },

{ 790,  798, 60,{ 1360,  768, 340,  7, 0 /*P*/},{ 0xA0, 0x08, 1808} },

{ 799,  801, 75, { 1024,  768, 240,  4, 0 /*P*/}, { 0xA0, 0x08, 1312} },
{803, 810,	75,{ 1280, 768, 304, 9, 0/*P*/},{ 0xA0, 0x08, 1696} },

{803, 808,	60,{ 1024, 768, 264, 8, 0/*P*/},{ 0x98, 0x08, 1344} },

{ 801,  810, 70, { 1024,  768, 272,  3, 0 /*P*/}, { 0xB0, 0x08, 1376} },
{826, 836,	60,{ 1280, 800, 296, 8, 0/*P*/},{ 0xA0, 0x08, 1680} },
{ 899,  901, 75, { 1152,  864, 352,  3, 0 /*P*/}, { 0xA0, 0x08, 1600} },
{929, 939,	60,{ 1440, 900, 352, 8, 0/*P*/},{ 0xa0, 0x08, 1904} },
{995, 1005,	60,{ 1280, 960, 390, 3, 0/*P*/},{ 0xa0, 0x08, 1800} },
{1061,1071, 60,{ 1280, 1024, 326,3, 0/*P*/},{ 0xa0,	0x08, 1688} },

{1061, 1071, 75,{ 1280,	1024, 358, 3, 0/*P*/},{ 0xf0, 0x08, 1688} },
{1084, 1094, 60,{ 1680,	1050, 424, 8, 0/*P*/},{ 0xf0, 0x08, 2240} },
{1112, 1125, 60, { 1920, 1080, 502,  3, 0 /*P*/}, { 0xf0, 0x08, 2576} },
{1123, 1125, 50, { 1920, 1080, 502,  3, 0 /*P*/}, { 0xf0, 0x08, 2576}},
{1120, 1130, 30,{ 1920,	1080, 192, 8, 0/*P*/},{ 0xA0, 0x08, 2200} },
//{1245, 1255, 60,{ 1600,	1200, 462, 3, 0/*P*/},{ 0xf0, 0x08, 2160} },


// any resolution match
//{ 1,    1,   75, { 1920,  1080, 336,  3, 0 /*P*/}, { 0xA0, 0x08, 2600} },
{	0,    0}                          
};

AD9880_tblMode COMPONENT_tblMode[] = { 

// 25Hz
{ 740,  755, 25, {1280,  720, 264, 10, 0 /*P*/}, { 0x80, 0x28, 3952} }, // 720p@30Hz
{1124, 1135, 25, {1920, 1080, 200, 10, 0 /*P*/}, { 0xA0, 0x3C, 2644} },

// 30Hz
{ 740,  755, 30, {1280,  720, 266, 10, 0 /*P*/}, { 0x80, 0x28, 3310} }, // 720p@30Hz
{1124, 1135, 30, {1920, 1080, 302, 10, 0 /*P*/}, { 0xA0, 0x3C, 2644} },	 //1080p@30   20090624

// 50Hz
{520,  530, 50, { 640,  480,  98, 13, 0 /*P*/}, { 0x28, 0x08,  794} },
{740,  755, 50, {1280,  720, 262, 14, 0 /*P*/}, { 0xA0, 0x28, 1976} },   // 720p@50Hz for Matrix RS
{558,  578, 50, {1920, 1080, 202,  6, 1 /*I*/}, { 0xA0, 0x3C, 2644} },   // 1080i@50Hz

// 60Hz
{520,  530, 60, { 640,  480,  98, 13, 0 /*P*/}, { 0x28, 0x08,  794} },
{740,  755, 60, {1280,  720, 270, 16, 0 /*P*/}, { 0xA0, 0x28, 1650} },     // 720p@60Hz for Matrix RS
{558,  578, 60, {1920, 1080, 196,  6, 1 /*I*/}, { 0xA0, 0x3C, 2200} },     // 1080i@60Hz

// 72Hz
{1083, 1087, 72, {1280, 1024, 300,  6, 1 /*I*/}, { 0xA0, 0x3C, 1728} }, 

// any resolution match
{1,  1, 1, { 640,  480,  98, 13, 0 /*P*/}, { 0x28, 0x08,  794} },
{0, 0}
};

AD9880_tblMode *tblMode[] = {
	NULL,
	VGA_tblMode,
	//VGA_tblMode,
	DVI_tblMode,
	COMPONENT_tblMode,
	//COMPONENT_tblMode
};

/******************************************************************************/

